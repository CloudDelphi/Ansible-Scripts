# {{ ansible_managed }}
# Do NOT edit this file directly!

[DEFAULT]

# Destination email address used solely for the interpolations in
# jail.{conf,local} configuration files.
destemail = admin@fripost.org

# "ignoreip" can be a list of IP addresses, CIDR masks or DNS hosts. Fail2ban
# will not ban a host which matches an address in this list. Several addresses
# can be defined using space (and/or comma) separator.
ignoreip = 127.0.0.0/8, ::1, {{ ipsec_subnet }}

banaction = nftables-allports
logpath = /var/log/fail2ban/fail2ban.log

#
# JAILS
#

[sshd]
enabled = true

[postfix]
enabled = {{ 'MX' in group_names }}

[dovecot]
enabled = {{ 'IMAP' in group_names }}

[postfix-sasl]
enabled  = {{ 'MSA' in group_names }}

[roundcube-auth]
enabled = {{ 'webmail' in group_names }}
# XXX Bullseye: logpath = /var/log/roundcube/errors.log

[nextcloud]
enabled = {{ 'nextcloud' in group_names }}
port    = http,https
filter  = nextcloud
logpath = /var/log/nextcloud/nextcloud.log

# vim: set filetype=dosini :
